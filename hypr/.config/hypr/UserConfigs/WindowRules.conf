# Window Rules - Hyprland 0.53+ syntax
# Kepano: Only rules that serve actual workflow needs

# ============================================================================
# TAGS - Group apps for bulk rules
# ============================================================================

# Browsers
windowrule = tag +browser, match:class ^([Ff]irefox|org\.mozilla\.firefox|[Ff]irefox-esr)$
windowrule = tag +browser, match:class ^([Gg]oogle-chrome(-beta|-dev|-unstable)?)$
windowrule = tag +browser, match:class ^(chrome-.+-Default)$
windowrule = tag +browser, match:class ^([Cc]hromium)$
windowrule = tag +browser, match:class ^([Bb]rave-browser(-beta|-dev|-unstable)?)$
windowrule = tag +browser, match:class ^(zen-alpha|zen)$

# Terminals
windowrule = tag +terminal, match:class ^(Alacritty|kitty|foot)$
windowrule = tag +terminal, match:class ^(com\.mitchellh\.ghostty)$

# Editors/IDEs
windowrule = tag +projects, match:class ^(codium|codium-url-handler|VSCodium)$
windowrule = tag +projects, match:class ^(VSCode|code-url-handler|Code)$
windowrule = tag +projects, match:class ^(jetbrains-.+)$

# Communication
windowrule = tag +im, match:class ^([Dd]iscord|[Ww]ebCord|[Vv]esktop)$
windowrule = tag +im, match:class ^([Ff]erdium)$
windowrule = tag +im, match:class ^(org\.telegram\.desktop)$
windowrule = tag +im, match:class ^(teams-for-linux)$
windowrule = tag +im, match:class ^([Ww]hatsapp-for-linux|ZapZap)$

# Media
windowrule = tag +video, match:class ^([Mm]pv|vlc)$
windowrule = tag +screenshare, match:class ^(com\.obsproject\.Studio)$
windowrule = tag +multimedia, match:class ^([Aa]udacious)$

# Games
windowrule = tag +gamestore, match:class ^([Ss]team)$
windowrule = tag +gamestore, match:title ^([Ll]utris)$
windowrule = tag +gamestore, match:class ^(com\.heroicgameslauncher\.hgl)$
windowrule = tag +game, match:class ^(gamescope)$
windowrule = tag +game, match:class ^(steam_app_.*)$

# File managers
windowrule = tag +filemanager, match:class ^([Tt]hunar|org\.gnome\.Nautilus|[Pp]cmanfm-qt)$

# Settings/utilities
windowrule = tag +settings, match:class ^(pavucontrol|org\.pulseaudio\.pavucontrol)$
windowrule = tag +settings, match:class ^(nm-connection-editor|blueman-manager)$
windowrule = tag +settings, match:class ^(file-roller|org\.gnome\.FileRoller)$
windowrule = tag +settings, match:class ^(qt5ct|qt6ct)$
windowrule = tag +settings, match:class ^([Rr]ofi)$

# Viewers
windowrule = tag +viewer, match:class ^(gnome-system-monitor|org\.gnome\.SystemMonitor)$
windowrule = tag +viewer, match:class ^(evince)$
windowrule = tag +viewer, match:class ^(eog|org\.gnome\.Loupe)$

# ============================================================================
# WORKSPACE ASSIGNMENTS
# ============================================================================

windowrule = workspace 1, match:tag browser
windowrule = workspace 2, match:tag terminal
windowrule = workspace 4, match:class ^(obsidian)$
windowrule = workspace 4 silent, match:tag screenshare
windowrule = workspace 5, match:tag gamestore
windowrule = workspace 6 silent, match:class ^(\.?virt-manager)$
windowrule = workspace 7, match:tag im
windowrule = workspace 8, match:tag game
windowrule = workspace 9 silent, match:tag multimedia

# ============================================================================
# FLOATING - dialogs, popups, utilities
# ============================================================================

windowrule = float on, match:tag settings
windowrule = float on, match:tag viewer
windowrule = float on, match:class ^([Qq]alculate-gtk|org\.gnome\.Calculator)$
windowrule = float on, match:class ^([Ff]erdium)$
windowrule = float on, match:class ^(mpv|com\.github\.rafostar\.Clapper)$
windowrule = float on, match:class ^([Zz]oom|onedriver)$

# Dialogs
windowrule = float on, match:title ^(Authentication Required)$
windowrule = center on, match:title ^(Authentication Required)$

windowrule = float on, match:title ^(Save As)$
windowrule = size 70% 60%, match:title ^(Save As)$
windowrule = center on, match:title ^(Save As)$

windowrule = float on, match:title ^(Add Folder to Workspace)$
windowrule = size 70% 60%, match:title ^(Add Folder to Workspace)$
windowrule = center on, match:title ^(Add Folder to Workspace)$

windowrule = float on, match:initial_title (Open Files)
windowrule = size 70% 60%, match:initial_title (Open Files)

# Steam/Heroic popups (float non-main windows)
windowrule = float on, match:class ^([Ss]team)$, match:title negative:^([Ss]team)$
windowrule = float on, match:class ^(com\.heroicgameslauncher\.hgl)$, match:title negative:(Heroic Games Launcher)

# Thunar dialogs
windowrule = float on, match:class [Tt]hunar, match:title negative:(.*[Tt]hunar.*)
windowrule = center on, match:class [Tt]hunar, match:title negative:(.*[Tt]hunar.*)

# VSCode dialogs
windowrule = float on, match:class (codium|VSCodium), match:title negative:(.*[Cc]odium.*|.*VSCodium.*)

# ============================================================================
# PICTURE-IN-PICTURE
# ============================================================================

windowrule = float on, match:title ^(Picture-in-Picture)$
windowrule = pin on, match:title ^(Picture-in-Picture)$
windowrule = keep_aspect_ratio on, match:title ^(Picture-in-Picture)$
windowrule = move 72% 7%, match:title ^(Picture-in-Picture)$

# ============================================================================
# SIZING
# ============================================================================

windowrule = size 70% 70%, match:tag settings
windowrule = center on, match:tag settings
windowrule = size 60% 70%, match:class ^([Ww]hatsapp-for-linux|ZapZap)$
windowrule = size 60% 70%, match:class ^([Ff]erdium)$

# ============================================================================
# GAMES - performance over aesthetics
# ============================================================================

windowrule = fullscreen on, match:tag game
windowrule = no_blur on, match:tag game

# ============================================================================
# VIDEO - full opacity for clarity
# ============================================================================

windowrule = opacity 1.0 1.0, match:tag video
windowrule = no_blur on, match:tag video

# ============================================================================
# IDLE INHIBIT
# ============================================================================

windowrule = idle_inhibit fullscreen, match:fullscreen 1

# ============================================================================
# LAYER RULES
# ============================================================================

layerrule = ignore_alpha 1, match:namespace rofi
layerrule = ignore_alpha 1, match:namespace notifications
layerrule = ignore_alpha 0.5, match:namespace quickshell:overview
